{
  "comments": [
    {
      "key": {
        "uuid": "17c4087c_bc2eadbe",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-03-13T04:09:12Z",
      "side": 1,
      "message": "\u0026\u0026 on previous line.",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2168ea9d_5131cfed",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T05:04:34Z",
      "side": 1,
      "message": "Thanks for reminding. It is a mistake by being careless.",
      "parentUuid": "17c4087c_bc2eadbe",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "17c4087c_7c2935b5",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 469,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-03-13T04:09:12Z",
      "side": 1,
      "message": "wakes",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2168ea9d_912b677e",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 469,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T05:04:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "17c4087c_7c2935b5",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c68ad9d_5924a3dd",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 471,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2015-03-11T01:15:33Z",
      "side": 1,
      "message": "Nit: I think I would have written this as\nif (abs_timeout_or_null \u003d\u003d NULL) { ... } else { ... }\nto avoid repeating the test.  It also probably makes the code slightly clearer.",
      "range": {
        "startLine": 471,
        "startChar": 32,
        "endLine": 471,
        "endChar": 61
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2168ea9d_76ab2908",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 471,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T03:44:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c68ad9d_5924a3dd",
      "range": {
        "startLine": 471,
        "startChar": 32,
        "endLine": 471,
        "endChar": 61
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c728992_34f530d1",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 484,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2015-03-11T01:15:33Z",
      "side": 1,
      "message": "Are we sure that this has no significant performance impact?  I think the case that really matters here is the uncontended, normal, not timed case.  I don\u0027t really care about the timed case, and I hate to see us slowing down the normal case for it.  The fast path now has three calls in it, and my guess is the compiler can\u0027t get rid of any of them.  My inclination would have been to handle the uncontended normal case directly here in line, and then share the rest of the code path between the timed and untimed case.\n\nThe \"worst\" case here is probably Nexus 9, where the atomic operations are potentially cheap.",
      "range": {
        "startLine": 483,
        "startChar": 0,
        "endLine": 484,
        "endChar": 59
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c178ee71_ab46390f",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 484,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T03:44:44Z",
      "side": 1,
      "message": "Now I know you \"hate\" slowing down things :)\nIf it is just for normal, not timed case, I add __normal_mutex_trylock here. The benchmark results in N5, N7, N9 show that it is slightly faster in normal, not timed case than before, while it slows down other mutex types.",
      "parentUuid": "7c728992_34f530d1",
      "range": {
        "startLine": 483,
        "startChar": 0,
        "endLine": 484,
        "endChar": 59
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "37c10c6d_fdcd4332",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-03-13T04:09:12Z",
      "side": 1,
      "message": "pthread_mutex_unlock_normal?",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "414a3e43_d908a4ad",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T05:04:34Z",
      "side": 1,
      "message": "Done. I saw on the review of an early change that we tend to use __function_name for non API functions, so we can notice it easily when it is shown in the export symbol table. Is my understanding true? And is it for the situation that we miss the \"static\" key word in static functions?",
      "parentUuid": "37c10c6d_fdcd4332",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "414a3e43_b9fe80e8",
        "filename": "libc/bionic/pthread_mutex.cpp",
        "patchSetId": 4
      },
      "lineNbr": 498,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-03-13T05:37:57Z",
      "side": 1,
      "message": "yes, __pthread_mutex_unlock_normal is probably a better idea, for exactly those reasons.\n\nin theory we shouldn\u0027t need to worry as much about accidents because we have a script to check for mistakes ... but we still need to remember to actually run the script :-(",
      "parentUuid": "414a3e43_d908a4ad",
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c728992_f4dbb8ea",
        "filename": "tests/pthread_test.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1201,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2015-03-11T01:15:33Z",
      "side": 1,
      "message": "If we keep adding these, should we make them shorter?  One second waits in each test add up ...",
      "range": {
        "startLine": 1201,
        "startChar": 4,
        "endLine": 1201,
        "endChar": 13
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2168ea9d_36c9b1f5",
        "filename": "tests/pthread_test.cpp",
        "patchSetId": 4
      },
      "lineNbr": 1201,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-03-13T03:44:44Z",
      "side": 1,
      "message": "Done. Changed to another implementation here. As the test runner has 1 minute test running deadline, we don\u0027t need to worry about hanging here.",
      "parentUuid": "7c728992_f4dbb8ea",
      "range": {
        "startLine": 1201,
        "startChar": 4,
        "endLine": 1201,
        "endChar": 13
      },
      "revId": "9efaa672ae0e2aa60f4f98c2c21b39f8590777ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}