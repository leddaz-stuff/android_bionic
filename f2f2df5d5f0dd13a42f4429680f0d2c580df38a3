{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6e764d09_0b5bf340",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-04-25T21:00:48Z",
      "side": 1,
      "message": "that still seems like the \"least worst\" option though?\n\ni don\u0027t think adding a new API makes any sense --- no-one will use it.\n\n(if you do want to go this route, the libc-coord list is probably the place to start? or persuade linux that maybe darwin shouldn\u0027t be the only kernel with posix_spawn...)",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9272df3b_fa147350",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2023-04-25T21:38:21Z",
      "side": 1,
      "message": "With this patch the users who likely actually matter will use it, i.e. posix_spawn and (with a separate patch) Java. I don\u0027t think we need to do more than that (e.g. persuade apps to use it).\n\nThe idea behind making it a public API is that apps have the option of using it if they need to (e.g. they use stack tagging in their internal testing builds and have a custom process launcher). But if you think this is too far-fetched we can make it a platform-private API for now.\n\nIt may be worth considering bringing this up on libc-coord, but I guess it wouldn\u0027t be necessary if we add it as a platform-private API. Maybe we can start with a private API and in parallel I will see if I can find some time to start a thread on libc-coord.",
      "parentUuid": "6e764d09_0b5bf340",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d351c8c_fff921ff",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-04-25T23:57:07Z",
      "side": 1,
      "message": "\u003e But if you think this is too far-fetched we can make it a platform-private API for now.\n\nyeah, there\u0027s that, but i\u0027m also assuming we end up needing to make vfork() \u003d\u003d fork() for MTE in the end anyway?\n\n\u003e Maybe we can start with a private API\n\nthat sounds like a better place to start. (he says, not really understanding how ART deals with stuff like this. but that\u0027s going to be a problem for them to solve no matter what we do, other than switching them to fork().)",
      "parentUuid": "9272df3b_fa147350",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d64a7a22_01b5b221",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2023-04-26T00:46:19Z",
      "side": 1,
      "message": "\u003e yeah, there\u0027s that, but i\u0027m also assuming we end up needing to make vfork() \u003d\u003d fork() for MTE in the end anyway?\n\nNot necessarily. The plan would be to leave vfork() in place with its caveats, and recommend that developers move to another API if they need stack MTE to work correctly. If we don\u0027t expose vforkrun() as a public API, we can recommend moving to posix_spawn().",
      "parentUuid": "6d351c8c_fff921ff",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99955fb3_c1e568ef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-04-26T21:20:22Z",
      "side": 1,
      "message": "\u003e Not necessarily. The plan would be to leave vfork() in place with its caveats, and recommend that developers move to another API if they need stack MTE to work correctly.\n\nthat seems like a barrier to MTE use amongst developers though? vfork() is probably magic left behind by the ancients to most people (as it is at google).\n\n\u003e If we don\u0027t expose vforkrun() as a public API, we can recommend moving to posix_spawn().\n\ni\u0027ve no idea what (if anything) apps use vfork() for but every time i look, most of the platform uses do have a reason.\n\ni note that ndk_translation implements vfork() as fork() for app code (because it needs to do translation), so there\u0027s some precedent for \"this is fine\"...",
      "parentUuid": "d64a7a22_01b5b221",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "670ff766_54285747",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2023-04-25T20:45:31Z",
      "side": 1,
      "message": "enh: Ping.",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "428e8f0e_91d926e5",
        "filename": "libc/include/android/vforkrun.h",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-04-25T21:00:48Z",
      "side": 1,
      "message": "(or did you not mean to put this here, and intended this to be in \u003cplatform/\u003e instead? at the moment the declaration is public but the definition is private.)",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0982656_1683c951",
        "filename": "libc/include/android/vforkrun.h",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2023-04-25T21:38:21Z",
      "side": 1,
      "message": "For the definition I was waiting for it to become possible to add this to LIBC_V.",
      "parentUuid": "428e8f0e_91d926e5",
      "revId": "f2f2df5d5f0dd13a42f4429680f0d2c580df38a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}