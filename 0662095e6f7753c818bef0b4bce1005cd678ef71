{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "09867496_eb91b0fc",
        "filename": "libc/stdio/printf_common.h",
        "patchSetId": 8
      },
      "lineNbr": 842,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-05-01T23:13:32Z",
      "side": 1,
      "message": "now you\u0027re paying to check twice (which i didn\u0027t explicitly mention before, but was the other thing i didn\u0027t like in the previous patchset)...\n\ni was thinking of something more like this:\n```\nstatic int w_to_flag(int size, bool fast) {\n  static constexpr fast_flag \u003d fast ? LLONGINT : 0;\n  if (size \u003d\u003d 8) return CHARINT;\n  if (size \u003d\u003d 16) return fast ? fast_flag : SHORTINT;\n  if (size \u003d\u003d 32) return fast ? fast_flag : 0;\n  if (size \u003d\u003d 64) return LLONGINT;\n  __fortify_fatal(\"%%w%s%d is unsupported\", fast ? \"f\" : \"\", size);\n}\n```",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61291355_e8bccf13",
        "filename": "libc/stdio/printf_common.h",
        "patchSetId": 8
      },
      "lineNbr": 842,
      "author": {
        "id": 1890456
      },
      "writtenOn": "2023-05-02T00:13:30Z",
      "side": 1,
      "message": "Ohh I see. I will keep using switch here.",
      "parentUuid": "09867496_eb91b0fc",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9dfa369_a3bd49ed",
        "filename": "libc/stdio/printf_common.h",
        "patchSetId": 8
      },
      "lineNbr": 842,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-05-02T14:57:09Z",
      "side": 1,
      "message": "i prefer the `if`s myself (because it\u0027s 4 lines to look at instead of 23, most of which don\u0027t do anything), but that\u0027s fine. but please use `?:` rather than `if`/`else`, and the constexpr is a lot better than repeating the `sizeof()`, especially the `if (fast) return (sizeof()...` versus `if (fast \u0026\u0026 sizeof()...` --- anyone reading this needs to think about whether or not there\u0027s a reason why they\u0027re different. (it\u0027s early in the morning, but i think the answer is no? the bug in my version is that i said `fast` in the constexpr rather than `fast \u0026\u0026 (sizeof(void*) \u003d\u003d 8)`, right?)\n\n(if _not_, then we probably should just go with the `if (fast)` on the outside, because we\u0027re obviously struggling to come up with something that\u0027s both correct and readable!)",
      "parentUuid": "61291355_e8bccf13",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d333f972_7cc07c5c",
        "filename": "libc/stdio/vfprintf.cpp",
        "patchSetId": 8
      },
      "lineNbr": 527,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-05-01T23:13:32Z",
      "side": 1,
      "message": "we still can\u0027t put the `bool` here?",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "419d2828_f6dd2527",
        "filename": "libc/stdio/vfprintf.cpp",
        "patchSetId": 8
      },
      "lineNbr": 527,
      "author": {
        "id": 1890456
      },
      "writtenOn": "2023-05-02T00:13:30Z",
      "side": 1,
      "message": "We can, but we need to add brackets here.",
      "parentUuid": "d333f972_7cc07c5c",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c3fa0fd_046b48a7",
        "filename": "libc/stdio/vfprintf.cpp",
        "patchSetId": 8
      },
      "lineNbr": 527,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-05-02T14:57:09Z",
      "side": 1,
      "message": "that\u0027s a good improvement! (the general rule being something like \"don\u0027t declare until you actually _need_ the thing; minimize its scope\". not for performance, just for readability --- everything needed to understand a piece of code should be right there, not three or four screens before.)",
      "parentUuid": "419d2828_f6dd2527",
      "revId": "0662095e6f7753c818bef0b4bce1005cd678ef71",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}