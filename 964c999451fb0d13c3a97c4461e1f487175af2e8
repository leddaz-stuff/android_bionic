{
  "comments": [
    {
      "key": {
        "uuid": "751d405c_9d5e15c9",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1779,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-03-23T17:43:40Z",
      "side": 1,
      "message": "what needs this? i thought it was only for the two cases mentioned above. (i wish visibility defaulted to private, like in google3!)",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92a3384e_1c3c61c3",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1779,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-03-24T01:40:53Z",
      "side": 1,
      "message": "This is currently being used by \n\n* com.android.runtime (this is obvious)\n* com.android.art\n* com.android.media\n\nThe dependency for the later two APEXes were via libasync_safe.\n\nI\u0027ve changed \"anyapex\" to the explicit list of names of the aforementioned apexes.",
      "parentUuid": "751d405c_9d5e15c9",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "740ea3c8_e8eacfe6",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1779,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-03-25T00:08:40Z",
      "side": 1,
      "message": "is that a transitive dependency? i didn\u0027t media in https://source.corp.google.com/search?q\u003dlibasync_safe\u0026sq\u003dpackage:%5Eandroid$\n\nas for ART, why does it need this? presumably this is because of the `header_libs:` in the libasync_safe cc_library_static, but is there some way we can fix that to make it clear that that\u0027s just to break the cyclic dependency when building, and users of the library should just use the bionic headers via the normal route?",
      "parentUuid": "92a3384e_1c3c61c3",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "913ebfc4_e9c28b9c",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1779,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-03-25T00:26:12Z",
      "side": 1,
      "message": "Sorry. I now don\u0027t see the (transitive) dependency to this from  the media APEX. It was my oversight. So I am removing com.android.media.swcodec from the list.\n\n`m \u003capexname\u003e-deps-info` could be used to examine the dependency tree of an apex.\n\nIt showed me that the dependency chain to libc_headers in the ART APEX is:\n\nlibc_headers \u003c- libasync_safe\nlibasync_safe \u003c- libbacktrace, libsigchain\nlibbacktrace \u003c- libart, libartd, ...\nlibsigchain \u003c- libart, libartd, dex2oat, ...\n\n\u003e  but is there some way we can fix that to make it clear that that\u0027s just to break the cyclic dependency when building, and users of the library should just use the bionic headers via the normal route?\n\nThen I think you need to use the visibility property to make this module be visible only to the places that you want. If you want to do that with this change, please let me know.",
      "parentUuid": "740ea3c8_e8eacfe6",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "864b08af_9d4c7f5c",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1779,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-03-26T10:15:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "913ebfc4_e9c28b9c",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9759a03_b4891e34",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1914,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-03-23T17:43:40Z",
      "side": 1,
      "message": "who needs this and why?",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59ee009c_7c47dc2a",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1914,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-03-24T01:40:53Z",
      "side": 1,
      "message": "The following are inheriting from crt_defaults and are used in almost every binary files in all APEXes because they are automatically linked by the build system. [1]\n\n\t\t\"crtbegin_dynamic\",\n\t\t\"crtbegin_dynamic1\",\n\t\t\"crtbegin_so\",\n\t\t\"crtbegin_so1\",\n\t\t\"crtbegin_static\",\n\t\t\"crtbrand\",\n\t\t\"crtend_android\",\n\t\t\"crtend_so\",\n\n[1] https://source.corp.google.com/android/build/soong/cc/binary.go;l\u003d129?q\u003dcrtbegin_dynamic%20f:%5C.go",
      "parentUuid": "e9759a03_b4891e34",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a83e1180_e1e25318",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1914,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-03-25T00:08:40Z",
      "side": 1,
      "message": "yeah, that makes sense. i just assumed that would be somewhere else in the build system already. but even if it was, it would probably make more sense to remove it from there are declare it here anyway, so...",
      "parentUuid": "59ee009c_7c47dc2a",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a1277d6_822c3422",
        "filename": "libc/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 1914,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-03-25T00:26:12Z",
      "side": 1,
      "message": "Yeah, I agree with you. So, this is better than having these whitelisted in the build system.",
      "parentUuid": "a83e1180_e1e25318",
      "revId": "964c999451fb0d13c3a97c4461e1f487175af2e8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}