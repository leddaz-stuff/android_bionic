{
  "comments": [
    {
      "key": {
        "uuid": "9f377034_d0285476",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-11-25T07:06:01Z",
      "side": 1,
      "message": "why do we need this?",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f78f46c_e0f5ca79",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-11-25T07:16:28Z",
      "side": 1,
      "message": "I wanted to keep bind-mount from currently-used linker config onto current directory (Updated context at go/linker-config-apex).",
      "parentUuid": "9f377034_d0285476",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5d5c1b4_1f512336",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-11-25T07:34:14Z",
      "side": 1,
      "message": "I don\u0027t get it. We will have different mounts at /system/etc/linkerconfig. I don\u0027t understand the reason to have additional sub directories to distinguish  something.",
      "parentUuid": "2f78f46c_e0f5ca79",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b82d23fc_9dffecb8",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-11-25T07:43:35Z",
      "side": 1,
      "message": "We should keep multiple linker configurations at some location. I thought to keep them in the /system/etc/linkerconfig, with different subdirectories, and keep point which one is current by bind-mount it to current subdirectory.",
      "parentUuid": "c5d5c1b4_1f512336",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8ad566d_c5a1b05b",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-11-25T07:55:06Z",
      "side": 1,
      "message": "bind mounts works on files as well. so I suggest\n\na) /system/etc/linkerconfig/ld.config.txt \u003c-- the path that linker uses\nb) /system/etc/linkerconfig/bootstrap.ld.config.txt \u003c-- the file that was created for the boostrap ns\nc) /system/etc/linkerconfig/default.ld.config.txt \u003c- the file that was created for the default ns\n\nb) is bind mounted to a) in the bootstrap ns, while c) is bind mounted to a) in the default ns",
      "parentUuid": "b82d23fc_9dffecb8",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0765786_a463c70e",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-11-25T08:13:08Z",
      "side": 1,
      "message": "I didn\u0027t know that bind mount works with file! Anyway, there will be more linker configurations from APEX module with binary, so I thought managing with directory would make more sense. WDYT about this?",
      "parentUuid": "c8ad566d_c5a1b05b",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c82725c7_3d33f5e9",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-11-25T08:58:04Z",
      "side": 1,
      "message": "ok, but even in that case, we don\u0027t need the \"current\" subdir. We could bind-mount /system/etc/linkerconfig/{boostrap|default}/ to /system/etc/linkerconfig.",
      "parentUuid": "a0765786_a463c70e",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ef1a537_7d4b26bc",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-11-25T10:18:19Z",
      "side": 1,
      "message": "I thought \u0027current\u0027 idea to 1) flexible from any additional scenarios - we can have more versions of linker configuration and 2) easy to debug ld.config.txt content from any namespaces. By bind-mounting child dir to parent dir we would lose access to any other ld.config.txt, because as soon as we unmount bind-mounted child dir most of process would not work before we bind-mount one of the child dir with linker configuration. I agree that if we hide subdirs by bind mount it would look more clear, but just worried if there would be any corner cases.",
      "parentUuid": "c82725c7_3d33f5e9",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "485d7efe_0f1f65fa",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-11-25T12:34:02Z",
      "side": 1,
      "message": "you can switch into different namespaces using nsenter(1).",
      "parentUuid": "7ef1a537_7d4b26bc",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0802ac1c_f1c7b51d",
        "filename": "linker/linker.cpp",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2019-11-26T01:22:20Z",
      "side": 1,
      "message": "Just worried if debugging linker configuration would be so difficult (enough to require extra manual for that). Anyway I like the idea that in normal case we just need to check /system/etc/linkerconfig so I will update this source code and design doc also soon. Thanks for your suggestion.",
      "parentUuid": "485d7efe_0f1f65fa",
      "range": {
        "startLine": 98,
        "startChar": 80,
        "endLine": 98,
        "endChar": 87
      },
      "revId": "8c238d5e2fa81c197476a84e73df4ec93af1bf3c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}