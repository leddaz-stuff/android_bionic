{
  "comments": [
    {
      "key": {
        "uuid": "4328e79f_e5648160",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-03-31T17:56:19Z",
      "side": 1,
      "message": "It seems unfortunate to hardcode this location in every single test description.  Can we just tell the test runner that we want the file pushed to a temporary directory and run from there?\n\nThat would also let the test runner provide better isolation by creating a new temp directory per test and cleaning it up",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "854a2700_ee26f330",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-03-31T18:01:23Z",
      "side": 1,
      "message": "malloc_debug_unit_tests here is a folder name, not the binary name. So the binary will be pushed to the device at:\n/data/local/tmp/malloc_debug_unit_tests/malloc_debug_unit_tests\n\nThus each binary is running in its own folder. I think the name is kept in the path to make sure less chance of collision.\n\nI don\u0027t think the PushFilePreparer is that smart to pick a tmp dir automatically. Also, the binary should be located in a folder for GTest to be able to run the binary (through option native-test-device-path in line 23)",
      "parentUuid": "4328e79f_e5648160",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcce4f42_a7806dca",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-03-31T19:35:04Z",
      "side": 1,
      "message": "At least supporting $TMP or $TESTDIR or something would help.\n\nIf PushFilePreparer is specifying a directory, why does GTest get /data/local/tmp?  Is it assuming that every config is going push the test into the file \u003cnative-test-device-path\u003e/\u003ctest_name\u003e/\u003ctest_name\u003e?  That seems error prone.",
      "parentUuid": "854a2700_ee26f330",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd51bae1_8adf1e95",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-03-31T21:07:22Z",
      "side": 1,
      "message": "i haven\u0027t understood why we\u0027re shitting these XML files all over the tree at all... seems like no-one really thought this through.",
      "parentUuid": "bcce4f42_a7806dca",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "328df5b6_b7f285b8",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-03-31T21:42:48Z",
      "side": 1,
      "message": "yeah, something like generic $TMP could be handy. Related change is needed in GTest to look for modules in $TMP though. \n\nPushFilePreparer is generic, the option push takes in a module and direct (-\u003e) it to a target dir, which has no knowledge of if the test is a native test.",
      "parentUuid": "bcce4f42_a7806dca",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26b6ad0b_a774c4ae",
        "filename": "libc/malloc_debug/AndroidTest.xml",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-03-31T21:42:48Z",
      "side": 1,
      "message": "+sbasi\n\nThe details of these changes are described in the design doc:\nhttps://docs.google.com/document/d/1eabK3srlBLouMiBMrNP3xJPiRRdcoCquNxC8gBWPvx8/edit\n\nThe goal is basically to move test configuration closer to the test itself, so\n1. developers can run tradefed command line to run the test, same as in the test lab.\n2. one can add/remove a test to/from a suite in the project containing the test. For example, a test becomes unstable and needs some fix, the developer fixing the test can remove the test from apct suite in the same project, without the need to create a CL in tradefed.\n3. having test config next to the test makes it more obvious that a test is running in desired suites in the lab.",
      "parentUuid": "dd51bae1_8adf1e95",
      "range": {
        "startLine": 19,
        "startChar": 60,
        "endLine": 19,
        "endChar": 76
      },
      "revId": "4777254e94f1badd9291ad658a84f99e849300a7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}