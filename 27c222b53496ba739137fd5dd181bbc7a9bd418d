{
  "comments": [
    {
      "key": {
        "uuid": "040206f8_21554a15",
        "filename": "tests/bionic_gtest.h",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T03:28:48Z",
      "side": 1,
      "message": "do we actually want to declare tests like this? is this significantly easier to implement than ASSERT_DEADLINE(...)?\n\n(do we even need this kind of control? isn\u0027t this just going to encourage us to add flakiness?)",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44c23e1f_50a7f29a",
        "filename": "tests/bionic_gtest.h",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-09T05:24:43Z",
      "side": 1,
      "message": "Removed. I planed we can write test like below:\n\nTEST_DEADLINE_INFO(stdio, printf, 10)\nTEST(stdio, printf) {\n}\nBut It is simpler to just allow TEST_DEADLINE:\nTEST_DEADLINE(stdio, printf, 10) {\n}",
      "parentUuid": "040206f8_21554a15",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84b996ac_e7942251",
        "filename": "tests/bionic_gtest.h",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T18:25:23Z",
      "side": 1,
      "message": "my concern is that any test we write like this is going to be as flaky as a test that contains a sleep... although we run our tests on idle devices, and we only have a small number of devices to test (most of which have order-of-magnitude equivalent performance), when OEMs run CTS the full system is running so mid-test you can find yourself fighting Gmail sync for the CPU or whatever. also, there will probably always be OEMs shipping devices both far more and far less powerful than the ones we\u0027re using.\n\nTL;DR: i don\u0027t think we\u0027d ever be able to come up with a deadline value that works in real life.",
      "parentUuid": "44c23e1f_50a7f29a",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6424a2a4_bc20698c",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T03:28:48Z",
      "side": 1,
      "message": "can\u0027t we reuse the testing::internal::ColoredPrintf (and other parts of the test output infrastructure)?",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24cf0a49_cf582187",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-09T05:24:43Z",
      "side": 1,
      "message": "For ColoredPrintf, yes, we can reuse it. But it can\u0027t print color in device test by default. I think it is not cool, so I rewrite it and enable color printing by default.\nFor others, we should rewrite PrettyUnitTestResultPrinter to only print info about test, forbidden info about testcase/environment/test iteration.",
      "parentUuid": "6424a2a4_bc20698c",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4bf0e8b_0cdcf7f1",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T18:25:23Z",
      "side": 1,
      "message": "\u003e But it can\u0027t print color in device test by default\n\nwhy not? can we fix that?",
      "parentUuid": "24cf0a49_cf582187",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c45d4e61_028df058",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-10T01:38:25Z",
      "side": 1,
      "message": "In brief, we can\u0027t. In default, GTEST_FLAG(color) \u003d \"auto\", isatty(fileno(stdout)) is true, but gtest will test further the environment variable TERM, on device the value is vt100(at least on my nexus 7), so colored is not enabled.",
      "parentUuid": "c4bf0e8b_0cdcf7f1",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "648022c5_9c102dc3",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 275,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T03:28:48Z",
      "side": 1,
      "message": "popen?",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44c23e1f_508e1215",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 275,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-09T05:24:43Z",
      "side": 1,
      "message": "Yes, another choice besides fork. But I think fork is easier, as it need not to go through main() again. There is another place that fork is used.",
      "parentUuid": "648022c5_9c102dc3",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4bf0e8b_aceccb98",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 275,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T18:25:23Z",
      "side": 1,
      "message": "but you only enumerate the tests once, right, so performance doesn\u0027t matter. or am i misunderstanding what you\u0027re trying to say?",
      "parentUuid": "44c23e1f_508e1215",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8457d640_401a44e2",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 275,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-10T01:38:25Z",
      "side": 1,
      "message": "You are right, using popen/pclose makes code simpler. Previously I thought it may be not easy to go through shell/main again, but it works well.",
      "parentUuid": "c4bf0e8b_aceccb98",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6424a2a4_9c1dad5c",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 299,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T03:28:48Z",
      "side": 1,
      "message": "fscanf %s?",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24cf0a49_2f4be5a9",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 299,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2014-12-09T05:24:43Z",
      "side": 1,
      "message": "It has problem if gtest can\u0027t parse the arguments and dump the help information. So I change it to fgets.",
      "parentUuid": "6424a2a4_9c1dad5c",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c488eee4_8f9454d5",
        "filename": "tests/gtest_main.cpp",
        "patchSetId": 3
      },
      "lineNbr": 299,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-12-09T18:25:23Z",
      "side": 1,
      "message": "sgtm.",
      "parentUuid": "24cf0a49_2f4be5a9",
      "revId": "27c222b53496ba739137fd5dd181bbc7a9bd418d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}