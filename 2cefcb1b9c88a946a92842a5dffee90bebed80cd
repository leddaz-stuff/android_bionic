{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "606de822_cdb980df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-09T02:08:11Z",
      "side": 1,
      "message": "iirc the reason we didn\u0027t have a static benchmarks binary was because ifuncs didn\u0027t work? so probably fine now.\n\nthat said, i have noticed recently that `adb sync` with the bionic apex seems to \"just work\". certainly unit tests seem to pick up new versions of bionic. i\u0027d been meaning to ask +jiyong who\u0027d fixed that so i could peer bonus them!",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "456eacd5_977aaa63",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-12-09T02:16:12Z",
      "side": 1,
      "message": "If it\u0027s for non-flattened APEX, it has been working from the early days of APEX. If you are talking about flattened APEX, I don\u0027t know how it got fixed. https://b.corp.google.com/issues/141952744#comment9",
      "parentUuid": "606de822_cdb980df",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10e29f60_32edabd7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2020-12-09T02:18:24Z",
      "side": 1,
      "message": "Huh, \"adb sync\" works on apexes now? I thought that it needed a reboot, or at least some magic command to make apexd remount the apexes. I should try it again soon.",
      "parentUuid": "606de822_cdb980df",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ffbbc872_d1c4f60a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-09T02:19:15Z",
      "side": 1,
      "message": "yeah, it used to require a reboot for me, but last week (on cuttlefish at least) it \"just worked\".",
      "parentUuid": "10e29f60_32edabd7",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21c58a62_1602b54e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-12-09T03:39:15Z",
      "side": 1,
      "message": "Are you two using non-flattened APEX? Then, it can\u0027t be. AFAIK, it still requires reboot or rescan command. There hasn\u0027t been such a change to apexd recently. Let me try that.",
      "parentUuid": "ffbbc872_d1c4f60a",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb795a53_8e8c7475",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-12-09T03:45:13Z",
      "side": 1,
      "message": "Just checked. The update isn\u0027t applied until device reboots. Tested on aosp_cf_x86_phone.\n\nThe reason it seems to work might indicate that your test uses the bootstrap copies (system/lib/bootstrap/libc.so, etc.) instead of the one in the APEX.",
      "parentUuid": "21c58a62_1602b54e",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "191059a2_d3031f66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-09T06:11:03Z",
      "side": 1,
      "message": "did something change to cause that then? the bionic unit tests used to need a reboot to get the new bionic previously.\n\n(that is: is there something we can change so the benchmarks pick up the latest bionic too?)",
      "parentUuid": "eb795a53_8e8c7475",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d528a94d_42f37880",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-12-09T07:21:47Z",
      "side": 1,
      "message": "Can you share the build ID where you were able to run the benchmark without reboot? I could investigate. It would be great if you can file a bug with a repro step.\n\n\u003e is there something we can change so the benchmarks pick up the latest bionic too?\n\nWell, if you are okay with flattened APEX, you can follow the steps shown in https://b.corp.google.com/issues/141952744#comment9. (Just build with OVERRIDE_TARGET_FLATTEN_APEX\u003dtrue) If you have to use non-flattend APEX, I don\u0027t have an answer.",
      "parentUuid": "191059a2_d3031f66",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41d84177_41ab6ece",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-11T01:10:42Z",
      "side": 1,
      "message": "\u003e Can you share the build ID where you were able to run the benchmark without reboot? \n\nto be clear: it was the tests, not the benchmarks. (i didn\u0027t try the benchmarks.) and it was just some random ToT last week.\n\n\u003e Well, if you are okay with flattened APEX\n\nmy understanding from https://source.android.com/devices/tech/ota/apex#flattened_apex is that we can\u0027t just make that decision --- it\u0027s a choice that applies to all apexes on a product? oh, i see, you\u0027re saying \"for local testing\". i suppose i could just put that in my environment, but i\u0027m assuming it\u0027s not well tested so i might see other random issues in that case?",
      "parentUuid": "d528a94d_42f37880",
      "revId": "2cefcb1b9c88a946a92842a5dffee90bebed80cd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}