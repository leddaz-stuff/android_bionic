{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f0ea32a0_7f0b347e",
        "filename": "libc/bionic/libc_init_static.cpp",
        "patchSetId": 4
      },
      "lineNbr": 335,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-10-04T01:19:16Z",
      "side": 1,
      "message": "swap those and log \"unrecognized memtag mode\"?",
      "range": {
        "startLine": 334,
        "startChar": 1,
        "endLine": 335,
        "endChar": 14
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25c32409_2342e4a1",
        "filename": "libc/bionic/libc_init_static.cpp",
        "patchSetId": 4
      },
      "lineNbr": 335,
      "author": {
        "id": 1453063
      },
      "writtenOn": "2023-10-04T09:12:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f0ea32a0_7f0b347e",
      "range": {
        "startLine": 334,
        "startChar": 1,
        "endLine": 335,
        "endChar": 14
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "032eb3ee_559f4da8",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-10-04T01:19:16Z",
      "side": 1,
      "message": "`CHECK(has_min_version(7))`?",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 66
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8bd6244_2cd23c6a",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1453063
      },
      "writtenOn": "2023-10-04T09:12:08Z",
      "side": 1,
      "message": "Sure. Do you know what\u0027s up with this versioned linker? I looked at b/24465209 and still don\u0027t understand what\u0027s going on.",
      "parentUuid": "032eb3ee_559f4da8",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 66
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d5163d8_9b045353",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-10-04T15:51:06Z",
      "side": 1,
      "message": "No, I just saw this in e.g. get_tls above, so I was wondering if we needed / should have this here a well.\n\n@enh@google.com probably knows",
      "parentUuid": "d8bd6244_2cd23c6a",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 66
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eca3860e_183f1ea6",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-10-04T19:42:36Z",
      "side": 1,
      "message": "basically \"old software did naughty things with our private data structures\". in particular, it would insert bogus `struct soinfo` entries into our list. which means we\u0027ve had to be a bit careful about just assuming that newer fields are present. for a while we were very careful about this, only adding fields at the end, and never touching them without an explicit version check. i think we\u0027ve missed a few lately, and nothing\u0027s blown up yet (afaik), so the bad software might finally have aged out?\n\n(looking right now, though, maybe we don\u0027t have anything that\u0027s not \"checked enough\"? it looks like gap_start_/gap_size_ are probably only touched on _new_ ELF files anyway [if you\u0027re hitting huge page boundaries, you probably wouldn\u0027t run on devices a decade ago].)\n\nso, yeah, i think we\u0027re still in the world of \"avoid app compat issues by doing this dance\". +rprichard",
      "parentUuid": "7d5163d8_9b045353",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 66
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbee0750_c0d930cd",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1453063
      },
      "writtenOn": "2023-10-06T14:28:27Z",
      "side": 1,
      "message": "ack, thanks for the heads up.",
      "parentUuid": "eca3860e_183f1ea6",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 66
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e128b3aa_a5c07f62",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 364,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-10-04T01:19:16Z",
      "side": 1,
      "message": "is this stuff used?",
      "range": {
        "startLine": 358,
        "startChar": 0,
        "endLine": 364,
        "endChar": 0
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7af06260_74cc4650",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 364,
      "author": {
        "id": 1453063
      },
      "writtenOn": "2023-10-04T09:12:08Z",
      "side": 1,
      "message": "Yep, see the stack: aosp/1845896",
      "parentUuid": "e128b3aa_a5c07f62",
      "range": {
        "startLine": 358,
        "startChar": 0,
        "endLine": 364,
        "endChar": 0
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9daee867_b8706a96",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 449,
      "author": {
        "id": 1268571
      },
      "writtenOn": "2023-10-04T01:19:16Z",
      "side": 1,
      "message": "how does this get zero initialized? i",
      "range": {
        "startLine": 449,
        "startChar": 0,
        "endLine": 449,
        "endChar": 51
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "78a42e50_bb5d4cd9",
        "filename": "linker/linker_soinfo.h",
        "patchSetId": 4
      },
      "lineNbr": 449,
      "author": {
        "id": 1453063
      },
      "writtenOn": "2023-10-04T09:12:08Z",
      "side": 1,
      "message": "From a quick peek, soinfos get allocated eventually here: https://cs.android.com/android/platform/superproject/main/+/main:bionic/linker/linker_block_allocator.cpp;l\u003d79?q\u003dbionic%2Flinker%2Flinker_block_allocator.cpp:79\u0026ss\u003dandroid%2Fplatform%2Fsuperproject%2Fmain\n\nIt\u0027s a little esoteric but maybe it\u0027s more confusing to just have our member with a default constructor and leaving the rest (\"hey, that thing is clearly zero-initialised because they explicitly did it, the rest must not be!\").",
      "parentUuid": "9daee867_b8706a96",
      "range": {
        "startLine": 449,
        "startChar": 0,
        "endLine": 449,
        "endChar": 51
      },
      "revId": "9187e3bd5977fee705b7373f0a3faaf7c117aabe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}