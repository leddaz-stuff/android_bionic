{
  "comments": [
    {
      "key": {
        "uuid": "442075de_6bde5d76",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-06-20T05:31:40Z",
      "side": 1,
      "message": "unless the atomics grown on me overnight, i think i\u0027ll remove them in the morning. a thread should only look at its own pid, so this just feels like we\u0027re implying there\u0027s something subtle going on when there\u0027s actually no reason for this.",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "642bb9c3_2f4f4d7e",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1011068
      },
      "writtenOn": "2014-06-20T05:47:56Z",
      "side": 1,
      "message": "Are you going to remove this atomic load? At least, I suppose memory barrier is necessary if atomic is removed.",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "642bb9c3_6fcca59e",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-06-20T06:07:28Z",
      "side": 1,
      "message": "where and why is a memory barrier needed?",
      "parentUuid": "642bb9c3_2f4f4d7e",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8458ad70_7d9c5314",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1011068
      },
      "writtenOn": "2014-06-20T14:13:38Z",
      "side": 1,
      "message": "My bad. It\u0027s not necessary. The cached pid is saved to a per-thread memory. So there is no contention here.",
      "parentUuid": "642bb9c3_6fcca59e",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "642bb9c3_1276f2ea",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-06-20T16:05:53Z",
      "side": 1,
      "message": "yeah, that\u0027s the same mistake we made. that\u0027s why i think having the atomic stuff here is more misleading than helpful...",
      "parentUuid": "8458ad70_7d9c5314",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "642bb9c3_924ae28d",
        "filename": "libc/bionic/pthread_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-06-20T16:05:53Z",
      "side": 1,
      "message": "(and this was an actual bug i introduced when adding the atomic stuff. we don\u0027t have a test of the mid-fork case, and i don\u0027t think i can reasonably write one.)",
      "revId": "a622312e6232b5caef057c225055a236f34faf6e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}