{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "95d7d825_87053c06",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-07-17T14:40:47Z",
      "side": 1,
      "message": "the change is fine, but the commit message is misleading. i think something like \"getentropy() was originally in \u003csys/random.h\u003e and remains there on macOS/iOS, but glibc later duplicated it in \u003cunistd.h\u003e too (musl _only_ has it in \u003cunistd.h\u003e, presumably because POSIX [link] adds it there)\" is closer. (also, although no-one cares about fuchsia, \"macOS is an outlier\" is pretty misleading in this context --- most _app_ developers want source compatibility with iOS, not glibc! _platform_ developers, of course, tend to hold the opposite preference. \"be source compatible with both where possible, for that reason\" is our default policy.)\n\nnote that man7 _used_ to say \u003csys/random.h\u003e but that was changed with a similarly misleading commit message with no rationale :-( at least they fixed\n```\n+In earlier versions of glibc this function was avaible under the\n+.BR \u003csys/random.h\u003e\n+header.\n```\nin the original commit to\n```\n.BR getentropy ()\nis also declared in\n.BR \u003csys/random.h\u003e .\n(No feature test macro need be defined to obtain the declaration from\nthat header file.)\n```\nnow!",
      "revId": "afd28085a409830eff490d5bb9c30711cd19ce9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bbf33c35_0230b08c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2023-07-17T14:58:37Z",
      "side": 1,
      "message": "`getentropy` is originally OpenBSD-ism, where it\u0027s been in `\u003cunistd.h\u003e` since they added it.\nhttps://man.openbsd.org/OpenBSD-5.6/getentropy\n\nThat\u0027s fun though. I had not realized glibc changed where it goes. I bet they put it in `\u003csys/random.h\u003e` to be next to `getrandom` and didn\u0027t pay attention. That is probably the source of Apple putting it in the wrong place too.\n\nI\u0027ll rephrase it a bit.\n\n\u003e  most app developers want source compatibility with iOS, not glibc!\n\n`getentropy` isn\u0027t available in iOS in the first place, so it\u0027s moot. And while iOS is a more popular platform than glibc, Android\u0027s `#define`s look more like glibc than iOS. So one should expect glibc vs iOS quirks to be resolved in the glibc direction by default than iOS.\n\nGiven all that, I think the comment about macOS and Fuchsia being outliers here is correct. This API starting to appear outside the BSD sphere is mostly a recent phenomenon. BoringSSL is picking it up because it\u0027s a much more convenient default for embedded-type platforms (notably this libcrypto_baremetal mess) than /dev/urandom.",
      "parentUuid": "95d7d825_87053c06",
      "revId": "afd28085a409830eff490d5bb9c30711cd19ce9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ef3ae71_fcaa0874",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2023-07-17T15:14:12Z",
      "side": 1,
      "message": "Rephrased the comment to capture the history a bit better.",
      "parentUuid": "bbf33c35_0230b08c",
      "revId": "afd28085a409830eff490d5bb9c30711cd19ce9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b3a25e7_2d4435c1",
        "filename": "libc/include/sys/random.h",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-07-17T14:40:47Z",
      "side": 1,
      "message": "(remove this comment)",
      "revId": "afd28085a409830eff490d5bb9c30711cd19ce9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46e2e560_009acb50",
        "filename": "libc/include/sys/random.h",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2023-07-17T15:14:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b3a25e7_2d4435c1",
      "revId": "afd28085a409830eff490d5bb9c30711cd19ce9b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}